if(Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length,i=Number(arguments[1])||0;for((i=i<0?Math.ceil(i):Math.floor(i))<0&&(i+=t);i<t;i++)if(i in this&&this[i]===e)return i;return-1}),!SuggestionObj){var SuggestionObj=new Object;Object.extend=function(e,t){for(var i in t)e[i]=t[i];return e}}SuggestionObj.Methods={labeling:!1,input:null,inputOldOnclick:null,inputOldOnfocus:null,inputOldOnblur:null,inputFocused:!1,resultDiv:null,previousQuery:"",queryMinLength:2,maxDisplayed:10,requestDelay_ms:333,lastRequestId:null,resultCounts:new Array,waitingRequests:new Array,lastLap:-1,divHidingTimeout:null,linkBase:prof_adv.suggest_url,cssClassName:"jmSuggestionResults suggest",uid:165,cid:833,form:null,formQueryPart:null,formValue:null,openInNewWindow:!1,newQueryTermArray:new Array,searchWithExternalLink:!1,keywordDeleting:!1,enableCustomQueryText:!1,inputOnfocus:function(e){if(SuggestionObj.inputFocused=!0,SuggestionObj.dontHideResults(),SuggestionObj.showResults(),SuggestionObj.inputOldOnfocus)return SuggestionObj.inputOldOnfocus(e)},inputOnclick:function(e){if(SuggestionObj.dontHideResults(),SuggestionObj.inputOldOnclick)return SuggestionObj.inputOldOnclick(e)},inputOnblur:function(e){if(SuggestionObj.inputFocused=!1,SuggestionObj.hideResults(),SuggestionObj.inputOldOnblur)return SuggestionObj.inputOldOnblur(e)},suggest:function(e,t){if(!$(this.input).data("tagify")){if(null==this.input){this.input=e,this.labeling=$(this.input).data("labeling"),this.inputOldOnfocus=e.onfocus,this.inputOldOnclick=e.onclick,this.inputOldOnblur=e.onblur,e.onfocus=SuggestionObj.inputOnfocus,e.onclick=SuggestionObj.inputOnclick,e.onblur=SuggestionObj.inputOnblur,e.setAttribute("autocomplete","off"),this.resultDiv=document.createElement("div"),this.resultDiv.onmouseover=new Function("SuggestionObj.dontHideResults();"),this.resultDiv.onmouseout=new Function("SuggestionObj.hideResults();"),this.resultDiv.onclick=new Function("SuggestionObj.dontHideResults();"),this.resultDiv.onblur=new Function("SuggestionObj.hideResults();"),this.resultDiv.onscroll=new Function("SuggestionObj.dontHideResults();"),this.resultDiv.onfocus=new Function("SuggestionObj.dontHideResults();"),this.resultDiv.style.display="none",this.resultDiv.setAttribute("class",this.cssClassName),this.resultDiv.setAttribute("className",this.cssClassName);var i="width",s=e.style.width;s||(document.defaultView?s=document.defaultView.getComputedStyle(e,"").getPropertyValue(i):e.currentStyle&&(s=e.currentStyle.width)),this.resultDiv.style.width=s,this.resultDiv.style.top=(e.offsetTop+e.offsetHeight).toString()+"px",this.resultDiv.style.left=e.offsetLeft.toString()+"px";var n=e.parentNode;e.lastchild==e?n.appendChild(this.resultDiv):n.insertBefore(this.resultDiv,e.nextSibling),this.form=document.createElement("form"),this.form.setAttribute("action",this.linkBase+"search"),this.form.setAttribute("method","POST"),this.form.setAttribute("id","suggestionForm"),this.openInNewWindow&&this.form.setAttribute("target","_blank"),this.formQueryPart=document.createElement("input"),this.formQueryPart.setAttribute("type","hidden"),this.formQueryPart.setAttribute("name","s"),this.form.appendChild(this.formQueryPart),this.formValue=document.createElement("input"),this.formValue.setAttribute("type","hidden"),this.formValue.setAttribute("name","v"),this.form.appendChild(this.formValue),document.body?document.body.appendChild(this.form):n.appendChild(this.form)}if(query=e.value,(this.previousQuery!=query||this.keywordDeleting)&&query.length>=this.queryMinLength)if(this.isQueryPointless(query))this.resultDiv.style.display="none",this.keywordDeleting&&(this.keywordDeleting=!1);else{suggest_url=prof.suggestUrl;var u={q:query};t&&t.type&&(u.type=t.type),t&&t.v2?(u.v=2,$.ajax({url:suggest_url,jsonpCallback:"",dataType:"json",headers:{Accept:"application/json"},data:u,success:function(e){SuggestionObj.suggestionCallbackv2(e)}})):$.ajax({url:suggest_url,jsonp:"callback",jsonpCallback:"SuggestionObj.suggestionCallback",dataType:"jsonp",data:u,success:function(e){}})}else this.previousQuery!=query&&query.length<this.queryMinLength&&(this.resultDiv.style.display="none");this.previousQuery=query}},isQueryPointless:function(e){var t=!0;for(i=e.length+1;i>this.queryMinLength;i--){var s=e.substring(0,i);if(null!=this.resultCounts[s]){t=this.resultCounts[s]>0;break}}return!t},sendRequest:function(e){var t=this.waitingRequests[e];t&&(this.lastRequestId==e?(t.buildScriptTag(),t.addScriptTag()):this.waitingRequests.splice(this.waitingRequests.indexOf(e),1))},removeRequestElement:function(e){request=this.waitingRequests[e],request&&(request.removeScriptTag(),this.waitingRequests.splice(this.waitingRequests.indexOf(e),1))},suggestionCallback:function(e,t){if(e.queryParams.q_orig==this.input.value||this.keywordDeleting){if(this.lastRequestId==t){var s=e&&e.suggestions?e.suggestions:new Array,n=e&&e.queryParams.q?e.queryParams.q:"";if(this.resultCounts[t]||(this.resultCounts[t]=s?s.length:0),this.enableCustomQueryText&&s.push(this.input.value),s&&0!=s.length){if(SuggestionObj.input){var u="<ul class='suggest__list'>",o=this.getSavedKeywords();for(o||(o=[]),i=0;i<o.length;i++)s.indexOf(o[i])>-1&&(u+="<li class='suggest__item'>"+this.transformLink("<a href='javascript:void(0)' id='sugg_"+i+"' suggestion=\""+encodeURIComponent(o[i])+'"><span onclick=\'SuggestionObj.deleteKeyword(event, "'+o[i]+"\")'>x</span>"+o[i]+"</a>",o[i],i)+"</li>",s.splice(s.indexOf(o[i]),1));for(i=0;i<s.length;i++)u+="<li class='suggest__item'>"+this.transformLink("<a href='javascript:void(0)' id='sugg_"+(i+o.length)+"' suggestion=\""+encodeURIComponent(s[i])+'">'+s[i]+"</a>",s[i],i)+"</li>";u+="</ul>",this.resultDiv.innerHTML=u;var r=SuggestionObj.input.clientWidth;if(this.resultDiv.style.width=r>0?SuggestionObj.input.clientWidth+2+"px":"350px",this.lastLap=-1,this.resultDiv.style.visibility="hidden",this.resultDiv.style.display="",s.length>this.maxDisplayed){var l=0;for(i=0;i<this.maxDisplayed;i++)l+=this.resultDiv.childNodes[0].childNodes[i].offsetHeight;this.resultDiv.childNodes[0].style.height=l+"px"}else this.resultDiv.childNodes[0].style.height="auto";this.resultDiv.style.visibility=""}}else this.resultDiv.style.display="none",this.resultDiv.innerHTML=""}$(this.resultDiv).mark(n,{element:"strong"}),this.removeRequestElement(t),this.keywordDeleting&&(this.keywordDeleting=!1)}},suggestionCallbackv2:function(e,t){var s=e&&e.suggestions?e.suggestions:new Array,n=s.map((e=>e.name)),u=e&&e.queryParams.q?e.queryParams.q:"";if(this.resultCounts[t]||(this.resultCounts[t]=s?s.length:0),s&&0!=s.length){if(SuggestionObj.input){var o="<ul class='suggest__list'>",r=this.getSavedKeywords();for(r||(r=[]),i=0;i<r.length;i++)n.indexOf(r[i])>-1&&(o+="<li class='suggest__item'>"+this.transformLink("<a href='javascript:void(0)' id='sugg_"+i+"' suggestion=\""+encodeURIComponent(r[i])+'"><span onclick=\'SuggestionObj.deleteKeyword(event, "'+r[i]+"\")'>x</span>"+r[i]+"</a>",r[i],i)+"</li>",s.splice(s.indexOf(r[i]),1));for(i=0;i<s.length;i++)o+="<li class='suggest__item'>"+this.transformLink("<a href='javascript:void(0)' id='sugg_"+(i+r.length)+"' suggestion=\""+encodeURIComponent(s[i].name)+'">'+s[i].name+"<span class='suggest-type'>"+prof.i18n.translate("app/advertisement",s[i].type)+"</span></a>",s[i],i)+"</li>";o+="</ul>",this.resultDiv.innerHTML=o;var l=SuggestionObj.input.clientWidth;if(this.resultDiv.style.width=l>0?SuggestionObj.input.clientWidth+2+"px":"350px",this.lastLap=-1,this.resultDiv.style.visibility="hidden",this.resultDiv.style.display="",s.length>this.maxDisplayed){var g=0;for(i=0;i<this.maxDisplayed;i++)g+=this.resultDiv.childNodes[0].childNodes[i].offsetHeight;this.resultDiv.childNodes[0].style.height=g+"px"}else this.resultDiv.childNodes[0].style.height="auto";this.resultDiv.style.visibility=""}}else this.resultDiv.style.display="none",this.resultDiv.innerHTML="";$(this.resultDiv).mark(u,{element:"strong"}),this.removeRequestElement(t),this.keywordDeleting&&(this.keywordDeleting=!1)},deleteKeyword:function(e,t){var i=this.getSavedKeywords(),s=i.indexOf(t);return i.splice(s,1),localStorage.setItem("searchKeywords",JSON.stringify(i)),this.keywordDeleting=!0,e.currentTarget.remove(),e.stopPropagation(),!1},saveKeyword:function(e){e=e.charAt(0).toUpperCase()+e.slice(1);var t=this.getSavedKeywords();t||(t=[]),-1==t.indexOf(e)&&t.push(e),t.length>10&&t.shift(),localStorage.setItem("searchKeywords",JSON.stringify(t))},getSavedKeywords:function(){return JSON.parse(localStorage.getItem("searchKeywords"))},hideResults:function(){SuggestionObj.resultDiv&&(this.divHidingTimeout=window.setTimeout("SuggestionObj.hideResultsDo();",500))},hideResultsDo:function(){""==SuggestionObj.resultDiv.style.display&&(SuggestionObj.resultDiv.style.display="none",0==document.activeElement.id.indexOf("sugg_")&&SuggestionObj.focusToInput())},dontHideResults:function(){""==SuggestionObj.resultDiv.style.display&&(null!=this.divHidingTimeout&&(window.clearTimeout(this.divHidingTimeout),this.divHidingTimeout=null),this.showResults())},showResults:function(){SuggestionObj.input&&SuggestionObj.input.value.length>2&&""!=this.resultDiv.innerHTML&&(this.resultDiv.style.display="")},keyDown:function(e){if((e=e||event)&&SuggestionObj.resultDiv)if(""!=SuggestionObj.resultDiv.style.display||SuggestionObj.isInputActive())9==e.keyCode&&""==SuggestionObj.resultDiv.style.display&&SuggestionObj.isInputActive()&&SuggestionObj.resultDiv.focus();else switch(e.keyCode){case 40:return SuggestionObj.move(SuggestionObj.resultDiv.firstChild,!0),!1;case 38:return SuggestionObj.move(SuggestionObj.resultDiv.firstChild,!1),!1;case 8:return e.cancelBubble=!0,e.returnValue=!1,!1;case 13:break;case 9:SuggestionObj.tab();break;default:SuggestionObj.focusToInput()}},c:0,keyUp:function(e){(e=e||event)&&SuggestionObj.resultDiv&&(40==e.keyCode?SuggestionObj.isInputActive()&&(SuggestionObj.showResults(),""==SuggestionObj.resultDiv.style.display&&SuggestionObj.move(SuggestionObj.resultDiv.firstChild,!0)):38==e.keyCode||9==e.keyCode||(27==e.keyCode&&""==SuggestionObj.resultDiv.style.display?(SuggestionObj.focusToInput(),SuggestionObj.hideResults()):""!=SuggestionObj.resultDiv.style.display||SuggestionObj.isInputActive()||SuggestionObj.otherKeyPressed(e.which||e.keyCode)),""==SuggestionObj.resultDiv.style.display&&SuggestionObj.lastLap>0&&SuggestionObj.lastLap<SuggestionObj.resultDiv.childNodes[0].childNodes.length-1&&(40==e.keyCode?(SuggestionObj.move(SuggestionObj.resultDiv.childNodes[0],!0),SuggestionObj.move(SuggestionObj.resultDiv.childNodes[0],!1)):38==e.keyCode&&(SuggestionObj.move(SuggestionObj.resultDiv.childNodes[0],!1),SuggestionObj.move(SuggestionObj.resultDiv.childNodes[0],!0))))},transformLink:function(e,t,i){var s=e;return e.indexOf("href=")<0?(this.newQueryTermArray[i]=t,s='<a href="javascript: void(0);" onclick="SuggestionObj.suggestionClickedAndSearch('+i+');" >'+e+"</a>"):this.searchWithExternalLink?(idx=t.lastIndexOf("<"),t=t.substring(0,idx),idx=t.lastIndexOf(">"),t=t.substring(idx+1),this.newQueryTermArray[i]=t,s=(s=s.replace(/href=/g,'onclick="SuggestionObj.suggestionClickedAndSearch('+i+');return false;" href=')).replace(/href=/g,'onclick="SuggestionObj.suggestionClickedAndSearch('+i+');SuggestionObj.hideResults();return false;" href=')):s=s.replace(/href=/g,'onclick="SuggestionObj.suggestionClicked(this);SuggestionObj.hideResults();return false;" href='),s=(s=s.replace("<a ","<a onfocus='SuggestionObj.dontHideResults();' onblur='SuggestionObj.hideResults();' onmouseover='SuggestionObj.mouseover(this);' ")).replace("<A ","<A onfocus='SuggestionObj.dontHideResults();' onblur='SuggestionObj.hideResults();' onmouseover='SuggestionObj.mouseover(this);' ")},focusToInput:function(){SuggestionObj.input&&SuggestionObj.input.focus()},isInputActive:function(){return SuggestionObj.input&&document.activeElement.id==SuggestionObj.input.id},move:function(e,t){if(e&&e.hasChildNodes()){for(i=0;i<e.childNodes.length;i++)e.childNodes[i].className="suggest__item";t?(this.lastLap++,this.lastLap>=e.childNodes.length&&(this.lastLap=e.childNodes.length-1)):(this.lastLap--,this.lastLap<0&&(this.lastLap=-1)),this.lastLap>-1?(e.childNodes[this.lastLap].childNodes[0].focus(),e.childNodes[this.lastLap].className="suggest__item focused"):this.focusToInput(),this.dontHideResults()}},otherKeyPressed:function(e){this.focusToInput(),SuggestionObj.input&&(8==e?SuggestionObj.input.value=SuggestionObj.input.value.substring(0,SuggestionObj.input.value.length-1):SuggestionObj.focusToInput(),$(SuggestionObj.input).trigger("keyup"))},suggestionClicked:function(e){return this.labeling&&(SuggestionObj.maxSectors?SectorChangeSelector(null,null,SuggestionObj.maxSectors).getSuggest(0,e.text):SectorChangeSelector().getSuggest(0,e.text)),this.input.value=decodeURIComponent(e.getAttribute("suggestion")),dataLayer.push({event:"customEvent",eventCategory:"Suggestion",eventAction:"Selected",eventLabel:this.input.value}),SuggestionObj.hideResultsDo(),$(window).trigger("suggestionClicked",this.input.value),$(document).trigger("submitSearchBar"),!1},suggestionClickedAndSearch:function(e){return this.input.parentNode.removeChild(this.resultDiv),changeQ(this.newQueryTermArray[e]),!0},tab:function(){this.lastLap++,this.lastLap>=SuggestionObj.resultDiv.firstChild.childNodes.length&&(SuggestionObj.focusToInput(),SuggestionObj.resultDiv.style.display="none",this.lastLap=-1)},mouseover:function(e){SuggestionObj.dontHideResults();var t=SuggestionObj.resultDiv.getElementsByTagName("*"),s=new RegExp("\\bfocused\\b");for(i=0;i<t.length;i++){var n=t[i].className;t[i].className=n.replace(s,"")}e.className="focused"},tagifysuggest:function(e){var t=document.querySelector("input[name=keyword]")||document.querySelector("input[name=adv_pattern]")||document.querySelector("input[name=position]"),i=new Tagify(t,{whitelist:[],dropdown:{position:"input"},delimiters:"--",callbacks:{input:function(t){var s=t.detail.value,n={q:s,type:"json",suggestionType:"position",result_type:e&&e.type?e.type:""};suggest_url=prof.suggestUrl,$.ajax({url:suggest_url,dataType:"jsonp",data:n,success:function(e){array=[];var t=$.map(e.suggestions,(function(e,t){return array.push(e),{id:t,label:e,value:e}}));i.settings.whitelist=t,i.dropdown.show.call(i,s)}})},add:function(t){e.showNarrowers&&window.Profession.KeywordNarrowers.init(t,"tagify",!1);var i=t.detail;$(i.tag);$(window).trigger("tags.beforeTagAdded");var s=$("#keyword").val();s=JSON.parse(s);let n=$.map(s,(function(e){return e.value}));e&&e.withoutCategorySuggestion||SectorChangeSelector().getSuggest(0,n)},remove:function(t){var i=$("#keyword").val(),s=i.split(","),n=$.inArray(t.detail.data.value,s);if(n>-1&&(s.splice(n),$("#keyword").val(s.join())),i){i=JSON.parse(i);let t=$.map(i,(function(e){return e.value}));e&&e.withoutCategorySuggestion||SectorChangeSelector().getSuggest(0,t)}else e&&e.withoutCategorySuggestion||SectorChangeSelector().reset(!0)}}})}},$(document).on("click",".delete-all-sector-check",(function(){SectorChangeSelector().reset(),SectorChangeSelector().delAllMainSectorCheck()})),$(document).on("click",".sector-stickers .closeLabel",(function(){try{SectorChangeSelector().closeLabel(this)}catch(e){}return!1})),$(".autocomplate-suggest-keyword").change((function(){try{SectorChangeSelector().reset()}catch(e){}})),$(".show-hide-sectors-button").on("click",(function(){try{SectorChangeSelector().selectorButton(this)}catch(e){}})),$(document).on("click",".show-category-select-layer",(function(){try{SectorChangeSelector().categorySelectButton(this)}catch(e){}}));var SuggMethods=$.extend({},SuggestionObj.Methods);function resetSuggestionObj(){SuggestionObj=new Object,Object.extend(SuggestionObj,SuggMethods),document.onkeyup=SuggestionObj.keyUp,document.onkeydown=SuggestionObj.keyDown}function JSONscriptRequest(e){this.fullUrl=e,this.noCacheIE="&noCacheIE="+(new Date).getTime(),this.headLoc=document.getElementsByTagName("body").item(0),this.scriptId="scriptId"+JSONscriptRequest.scriptCounter++}Object.extend(SuggestionObj,SuggestionObj.Methods),document.onkeyup=SuggestionObj.keyUp,document.onkeydown=SuggestionObj.keyDown,JSONscriptRequest.scriptCounter=1,JSONscriptRequest.prototype.buildScriptTag=function(){this.scriptObj=document.createElement("script"),this.scriptObj.setAttribute("type","text/javascript"),this.scriptObj.setAttribute("charset","utf-8"),this.scriptObj.setAttribute("src",this.fullUrl+this.noCacheIE),this.scriptObj.setAttribute("id",this.scriptId)},JSONscriptRequest.prototype.removeScriptTag=function(){this.headLoc.removeChild(this.scriptObj)},JSONscriptRequest.prototype.addScriptTag=function(){this.headLoc.appendChild(this.scriptObj)};